<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3å¤§æŒ‡æ ‡åˆ¤å®šå¼•æ“é€»è¾‘å›¾</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        .diagram-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .flow-diagram {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            border: 2px solid #e9ecef;
        }

        .flow-diagram h2 {
            color: #495057;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .flow-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
        }

        .flow-step::after {
            content: 'â†“';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            color: #667eea;
            font-weight: bold;
        }

        .flow-step:last-child::after {
            display: none;
        }

        .step-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .step-description {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .priority-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            color: white;
            margin-right: 8px;
        }

        .priority-high {
            background: #dc3545;
        }

        .priority-medium {
            background: #fd7e14;
        }

        .priority-low {
            background: #6c757d;
        }

        .threshold-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .threshold-table th,
        .threshold-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        .threshold-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .threshold-table .level-0 {
            background: #d4edda;
            color: #155724;
        }

        .threshold-table .level-1 {
            background: #d1ecf1;
            color: #0c5460;
        }

        .threshold-table .level-2 {
            background: #fff3cd;
            color: #856404;
        }

        .threshold-table .level-3 {
            background: #f8d7da;
            color: #721c24;
        }

        .threshold-table .level-4 {
            background: #f5c6cb;
            color: #721c24;
        }

        .algorithm-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .algorithm-section h2 {
            color: #495057;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            overflow-x: auto;
        }

        .comment {
            color: #68d391;
        }

        .formula {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.1em;
        }

        .decision-tree {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .decision-node {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #667eea;
            text-align: center;
            position: relative;
        }

        .decision-branch {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .branch-option {
            flex: 1;
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 0 10px;
            border: 2px solid #28a745;
            text-align: center;
        }

        .branch-option.fail {
            border-color: #dc3545;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  3å¤§æŒ‡æ ‡åˆ¤å®šå¼•æ“é€»è¾‘å›¾</h1>
            <p>åŸºäºä¼˜å…ˆçº§ä¿æŠ¤çš„æ™ºèƒ½ä¹¦ç­¾æé†’åˆ¤å®šç³»ç»Ÿ</p>
        </div>

        <div class="diagram-container">
            <!-- ä¸»è¦æµç¨‹å›¾ -->
            <div class="flow-diagram">
                <h2>ğŸ”„ æ ¸å¿ƒåˆ¤å®šæµç¨‹</h2>

                <div class="flow-step">
                    <div class="step-title">
                        <span class="priority-indicator priority-high">P1</span>
                        è®¿é—®æ¬¡æ•°åˆ¤å®š
                    </div>
                    <div class="step-description">
                        â€¢ æ£€æŸ¥è¿‘3å¤©å†…è®¿é—®æ¬¡æ•°<br>
                        â€¢ åŸºç¡€é˜ˆå€¼ï¼š3æ¬¡<br>
                        â€¢ å…·æœ‰ä¸€ç¥¨å¦å†³æƒ<br>
                        â€¢ å¤±è´¥åˆ™ç›´æ¥è¿”å›æœªé€šè¿‡
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-title">
                        <span class="priority-indicator priority-medium">P2</span>
                        è®¿é—®æ—¶é•¿åˆ¤å®š
                    </div>
                    <div class="step-description">
                        â€¢ æ£€æŸ¥æ´»è·ƒæµè§ˆæ—¶é•¿<br>
                        â€¢ åŸºç¡€é˜ˆå€¼ï¼š30ç§’<br>
                        â€¢ æ’é™¤è¯¯ç‚¹å‡»å’Œå¿«é€Ÿç¦»å¼€<br>
                        â€¢ å¤±è´¥åˆ™ç›´æ¥è¿”å›æœªé€šè¿‡
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-title">
                        <span class="priority-indicator priority-low">P3</span>
                        è®¿é—®æ·±åº¦åˆ¤å®š
                    </div>
                    <div class="step-description">
                        â€¢ æ£€æŸ¥é¡µé¢æ»šåŠ¨æ·±åº¦<br>
                        â€¢ åŸºç¡€é˜ˆå€¼ï¼š1.5å±<br>
                        â€¢ è¡¡é‡å†…å®¹å…³æ³¨åº¦<br>
                        â€¢ å¤±è´¥åˆ™ç›´æ¥è¿”å›æœªé€šè¿‡
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-title">
                        <span class="priority-indicator priority-high">âš–ï¸</span>
                        ç»¼åˆåŠ æƒè®¡ç®—
                    </div>
                    <div class="step-description">
                        â€¢ è®¿é—®æ¬¡æ•°æƒé‡ï¼š50%<br>
                        â€¢ è®¿é—®æ—¶é•¿æƒé‡ï¼š30%<br>
                        â€¢ è®¿é—®æ·±åº¦æƒé‡ï¼š20%<br>
                        â€¢ è®¡ç®—åŠ æƒæ€»åˆ†
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-title">
                        <span class="priority-indicator priority-high">ğŸ›¡ï¸</span>
                        ä¼˜å…ˆçº§ä¿æŠ¤
                    </div>
                    <div class="step-description">
                        â€¢ è®¿é—®æ¬¡æ•°å…·æœ‰ä¿æŠ¤ä½œç”¨<br>
                        â€¢ é˜²æ­¢ä½è®¿é—®æ¬¡æ•°è·å¾—é«˜çº§åˆ«<br>
                        â€¢ è°ƒæ•´æœ€ç»ˆåˆ¤å®šçº§åˆ«<br>
                        â€¢ ç¡®ä¿åˆ¤å®šåˆç†æ€§
                    </div>
                </div>
            </div>

            <!-- é˜ˆå€¼é…ç½®è¡¨ -->
            <div class="flow-diagram">
                <h2>ğŸ“Š é˜ˆå€¼é…ç½®è¡¨</h2>

                <h3>è®¿é—®æ¬¡æ•°é˜ˆå€¼ï¼ˆ3å¤©å†…ï¼‰</h3>
                <table class="threshold-table">
                    <tr>
                        <th>çº§åˆ«</th>
                        <th>é˜ˆå€¼</th>
                        <th>æè¿°</th>
                    </tr>
                    <tr class="level-0">
                        <td>åŸºç¡€å…³æ³¨</td>
                        <td>3æ¬¡</td>
                        <td>æœ€å°å…³æ³¨åº¦</td>
                    </tr>
                    <tr class="level-1">
                        <td>é€‚åº¦å…³æ³¨</td>
                        <td>5æ¬¡</td>
                        <td>ä¸­ç­‰å…³æ³¨åº¦</td>
                    </tr>
                    <tr class="level-2">
                        <td>é«˜åº¦å…³æ³¨</td>
                        <td>8æ¬¡</td>
                        <td>é«˜åº¦å…³æ³¨åº¦</td>
                    </tr>
                    <tr class="level-3">
                        <td>å¼ºçƒˆå…³æ³¨</td>
                        <td>12æ¬¡</td>
                        <td>å¼ºçƒˆå…³æ³¨åº¦</td>
                    </tr>
                    <tr class="level-4">
                        <td>æåº¦å…³æ³¨</td>
                        <td>20æ¬¡</td>
                        <td>æåº¦å…³æ³¨åº¦</td>
                    </tr>
                </table>

                <h3>è®¿é—®æ—¶é•¿é˜ˆå€¼ï¼ˆç§’ï¼‰</h3>
                <table class="threshold-table">
                    <tr>
                        <th>çº§åˆ«</th>
                        <th>é˜ˆå€¼</th>
                        <th>æè¿°</th>
                    </tr>
                    <tr class="level-0">
                        <td>å¿«é€Ÿæµè§ˆ</td>
                        <td>30ç§’</td>
                        <td>æ’é™¤è¯¯ç‚¹å‡»</td>
                    </tr>
                    <tr class="level-1">
                        <td>åˆæ­¥å…³æ³¨</td>
                        <td>60ç§’</td>
                        <td>1åˆ†é’Ÿå…³æ³¨</td>
                    </tr>
                    <tr class="level-2">
                        <td>è®¤çœŸæµè§ˆ</td>
                        <td>90ç§’</td>
                        <td>1.5åˆ†é’Ÿä¸“æ³¨</td>
                    </tr>
                    <tr class="level-3">
                        <td>æ·±åº¦å…³æ³¨</td>
                        <td>120ç§’</td>
                        <td>2åˆ†é’Ÿæ·±åº¦</td>
                    </tr>
                    <tr class="level-4">
                        <td>é•¿æ—¶é—´ä¸“æ³¨</td>
                        <td>180ç§’</td>
                        <td>3åˆ†é’Ÿä¸“æ³¨</td>
                    </tr>
                </table>

                <h3>è®¿é—®æ·±åº¦é˜ˆå€¼ï¼ˆå±å¹•æ•°ï¼‰</h3>
                <table class="threshold-table">
                    <tr>
                        <th>çº§åˆ«</th>
                        <th>é˜ˆå€¼</th>
                        <th>æè¿°</th>
                    </tr>
                    <tr class="level-0">
                        <td>åŸºç¡€æ»šåŠ¨</td>
                        <td>1.5å±</td>
                        <td>åŸºç¡€æ»šåŠ¨</td>
                    </tr>
                    <tr class="level-1">
                        <td>é€‚åº¦æ·±åº¦</td>
                        <td>3.0å±</td>
                        <td>ä¸­ç­‰æ·±åº¦</td>
                    </tr>
                    <tr class="level-2">
                        <td>æ·±åº¦æµè§ˆ</td>
                        <td>5.0å±</td>
                        <td>æ·±åº¦æµè§ˆ</td>
                    </tr>
                    <tr class="level-3">
                        <td>å¾ˆæ·±æµè§ˆ</td>
                        <td>8.0å±</td>
                        <td>å¾ˆæ·±æµè§ˆ</td>
                    </tr>
                    <tr class="level-4">
                        <td>ææ·±æµè§ˆ</td>
                        <td>12.0å±</td>
                        <td>ææ·±æµè§ˆ</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- ç®—æ³•è¯¦ç»†è¯´æ˜ -->
        <div class="algorithm-section">
            <h2>âš™ï¸ æ ¸å¿ƒç®—æ³•è¯¦è§£</h2>

            <h3>1. åŠ æƒåˆ†æ•°è®¡ç®—</h3>
            <div class="formula">
                åŠ æƒåˆ†æ•° = (è®¿é—®æ¬¡æ•°çº§åˆ« Ã— 0.5) + (è®¿é—®æ—¶é•¿çº§åˆ« Ã— 0.3) + (è®¿é—®æ·±åº¦çº§åˆ« Ã— 0.2)
            </div>

            <div class="code-block">
<span class="comment">// æƒé‡é…ç½®</span>
weights = {
  visit: 0.5,      <span class="comment">// è®¿é—®æ¬¡æ•°æƒé‡50%</span>
  duration: 0.3,   <span class="comment">// è®¿é—®æ—¶é•¿æƒé‡30%</span>
  depth: 0.2       <span class="comment">// è®¿é—®æ·±åº¦æƒé‡20%</span>
}

<span class="comment">// åŠ æƒåˆ†æ•°è®¡ç®—</span>
weightedScore = (visitLevel Ã— weights.visit) +
                (durationLevel Ã— weights.duration) +
                (depthLevel Ã— weights.depth)
            </div>

            <h3>2. ä¼˜å…ˆçº§ä¿æŠ¤æœºåˆ¶</h3>
            <div class="code-block">
<span class="comment">// åº”ç”¨ä¼˜å…ˆçº§ä¿æŠ¤</span>
function applyPriorityProtection(weightedScore, visitLevel, durationLevel, depthLevel) {
  let finalLevel = Math.round(weightedScore);

  <span class="comment">// è®¿é—®æ¬¡æ•°ä¿æŠ¤æœºåˆ¶</span>
  if (visitLevel === 0 && finalLevel > 1) finalLevel = 1;
  if (visitLevel === 1 && finalLevel > 2) finalLevel = 2;

  <span class="comment">// è®¿é—®æ—¶é•¿è°ƒèŠ‚æœºåˆ¶</span>
  if (durationLevel === 0 && finalLevel > 1) finalLevel = Math.max(0, finalLevel - 1);

  return Math.max(0, Math.min(4, finalLevel));
}
            </div>

            <h3>3. ç½®ä¿¡åº¦è®¡ç®—</h3>
            <div class="formula">
                ç½®ä¿¡åº¦ = (è®¿é—®æ¬¡æ•°è¾¾æˆåº¦ Ã— 0.5) + (è®¿é—®æ—¶é•¿è¾¾æˆåº¦ Ã— 0.3) + (è®¿é—®æ·±åº¦è¾¾æˆåº¦ Ã— 0.2)
            </div>

            <div class="code-block">
<span class="comment">// è®¡ç®—å„æŒ‡æ ‡è¾¾æˆåº¦</span>
visitConfidence = Math.min(1, actualVisitCount / thresholdVisitCount)
durationConfidence = Math.min(1, actualDuration / thresholdDuration)
depthConfidence = Math.min(1, actualDepth / thresholdDepth)

<span class="comment">// åŠ æƒå¹³å‡ç½®ä¿¡åº¦</span>
confidence = (visitConfidence Ã— weights.visit) +
              (durationConfidence Ã— weights.duration) +
              (depthConfidence Ã— weights.depth)
            </div>
        </div>

        <!-- å†³ç­–æ ‘ -->
        <div class="decision-tree">
            <h2>ğŸŒ³ å†³ç­–é€»è¾‘æ ‘</h2>

            <div class="decision-node">
                <strong>å¼€å§‹åˆ¤å®š</strong><br>
                <small>æ¥æ”¶3å¤§æŒ‡æ ‡æ•°æ®</small>
            </div>

            <div class="decision-branch">
                <div class="branch-option">
                    <strong>è®¿é—®æ¬¡æ•° â‰¥ 3æ¬¡</strong><br>
                    <small>ç»§ç»­ä¸‹ä¸€çº§åˆ¤å®š</small>
                </div>
                <div class="branch-option fail">
                    <strong>è®¿é—®æ¬¡æ•° < 3æ¬¡</strong><br>
                    <small>âŒ åˆ¤å®šå¤±è´¥</small>
                </div>
            </div>

            <div class="decision-node">
                <strong>è®¿é—®æ—¶é•¿åˆ¤å®š</strong><br>
                <small>æ£€æŸ¥æµè§ˆæ—¶é•¿</small>
            </div>

            <div class="decision-branch">
                <div class="branch-option">
                    <strong>è®¿é—®æ—¶é•¿ â‰¥ 30ç§’</strong><br>
                    <small>ç»§ç»­ä¸‹ä¸€çº§åˆ¤å®š</small>
                </div>
                <div class="branch-option fail">
                    <strong>è®¿é—®æ—¶é•¿ < 30ç§’</strong><br>
                    <small>âŒ åˆ¤å®šå¤±è´¥</small>
                </div>
            </div>

            <div class="decision-node">
                <strong>è®¿é—®æ·±åº¦åˆ¤å®š</strong><br>
                <small>æ£€æŸ¥æ»šåŠ¨æ·±åº¦</small>
            </div>

            <div class="decision-branch">
                <div class="branch-option">
                    <strong>è®¿é—®æ·±åº¦ â‰¥ 1.5å±</strong><br>
                    <small>è¿›å…¥ç»¼åˆè®¡ç®—</small>
                </div>
                <div class="branch-option fail">
                    <strong>è®¿é—®æ·±åº¦ < 1.5å±</strong><br>
                    <small>âŒ åˆ¤å®šå¤±è´¥</small>
                </div>
            </div>

            <div class="decision-node">
                <strong>âœ… ç»¼åˆåˆ¤å®šé€šè¿‡</strong><br>
                <small>è®¡ç®—æœ€ç»ˆçº§åˆ«å’Œç½®ä¿¡åº¦</small>
            </div>
        </div>

        <!-- ç³»ç»Ÿç»Ÿè®¡ -->
        <div class="algorithm-section">
            <h2>ğŸ“ˆ ç³»ç»Ÿç‰¹æ€§ç»Ÿè®¡</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">3</div>
                    <div class="stat-label">æ ¸å¿ƒæŒ‡æ ‡æ•°é‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">5</div>
                    <div class="stat-label">å…³æ³¨çº§åˆ«æ•°é‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">100%</div>
                    <div class="stat-label">æƒé‡æ€»å’Œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">5åˆ†é’Ÿ</div>
                    <div class="stat-label">æé†’å†·å´æ—¶é—´</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Level 2+</div>
                    <div class="stat-label">æé†’è§¦å‘é˜ˆå€¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">3å¤©</div>
                    <div class="stat-label">è®¿é—®æ¬¡æ•°ç»Ÿè®¡å‘¨æœŸ</div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc3545;"></div>
                    <span>é«˜ä¼˜å…ˆçº§ (P1)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #fd7e14;"></div>
                    <span>ä¸­ä¼˜å…ˆçº§ (P2)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #6c757d;"></div>
                    <span>ä½ä¼˜å…ˆçº§ (P3)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #28a745;"></div>
                    <span>é€šè¿‡åˆ¤å®š</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc3545;"></div>
                    <span>å¤±è´¥åˆ¤å®š</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>