<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设置 - 书签管理与智能收藏提示</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/options.css">
</head>
<body>
    <div class="container">
        <header class="settings-header">
            <h1>书签管理与智能收藏提示 - 设置</h1>
            <p class="subtitle">配置您的书签管理插件以获得最佳体验</p>
        </header>

        <main class="settings-content">
            <div class="settings-sidebar">
                <nav class="settings-nav">
                    <ul>
                        <li><a href="#general" class="active">常规设置</a></li>
                        <li><a href="#suggestions">智能提示设置</a></li>
                        <li><a href="#categories">自动分类设置</a></li>
                        <li><a href="#validation">URL有效性检查</a></li>
                        <li><a href="#appearance">界面与主题</a></li>
                        <li><a href="#advanced">高级设置</a></li>
                        <li><a href="#backup">备份与恢复</a></li>
                    </ul>
                </nav>
            </div>

            <div class="settings-form-container">
                <form id="settingsForm">
                    <!-- 常规设置 -->
                    <section id="general" class="settings-section active">
                        <h2>常规设置</h2>
                        
                        <div class="form-group">
                            <label for="defaultView">默认视图</label>
                            <select id="defaultView" name="defaultView" class="form-control">
                                <option value="list">列表视图</option>
                                <option value="grid">网格视图</option>
                            </select>
                            <div class="helper-text">选择打开书签管理器时的默认显示方式</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="defaultFolder">默认文件夹</label>
                            <select id="defaultFolder" name="defaultFolder" class="form-control">
                                <option value="1">书签栏</option>
                                <option value="2">其他书签</option>
                            </select>
                            <div class="helper-text">选择打开书签管理器时默认选择的文件夹</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="openInNewTab" name="openInNewTab">
                                在新标签页中打开书签
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="confirmBeforeDelete" name="confirmBeforeDelete" checked>
                                删除前确认
                            </label>
                        </div>
                    </section>

                    <!-- 智能提示设置 -->
                    <section id="suggestions" class="settings-section">
                        <h2>智能收藏提示设置</h2>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="notificationEnabled" name="notificationEnabled" checked>
                                启用智能收藏提示
                            </label>
                            <div class="helper-text">当您经常访问未收藏的网站时，自动提示您添加书签</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="visitThreshold">访问次数阈值</label>
                            <input type="number" id="visitThreshold" name="visitThreshold" min="1" max="20" value="5" class="form-control">
                            <div class="helper-text">需要访问多少次才提示收藏（推荐：3-10次）</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="dayRange">统计天数范围</label>
                            <input type="number" id="dayRange" name="dayRange" min="1" max="60" value="10" class="form-control">
                            <div class="helper-text">统计最近多少天内的访问次数（推荐：5-30天）</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="maxNotificationsPerDay">每日最大提示次数</label>
                            <input type="number" id="maxNotificationsPerDay" name="maxNotificationsPerDay" min="0" max="10" value="1" class="form-control">
                            <div class="helper-text">每天最多显示几次提示（0表示不限制）</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="clearNotifiedUrls" name="clearNotifiedUrls">
                                清除已通知记录
                            </label>
                            <div class="helper-text">清除已经提示过的网址记录，以便重新提示</div>
                        </div>
                    </section>

                    <!-- 自动分类设置 -->
                    <section id="categories" class="settings-section">
                        <h2>自动分类设置</h2>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="autoCategorizationEnabled" name="autoCategorizationEnabled" checked>
                                启用自动分类
                            </label>
                            <div class="helper-text">根据网站类型自动将书签归类到不同的文件夹</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="createCategoryFolders" name="createCategoryFolders" checked>
                                自动创建分类文件夹
                            </label>
                            <div class="helper-text">如果分类文件夹不存在，则自动创建</div>
                        </div>
                        
                        <h3>分类规则</h3>
                        <div class="category-rules-container" id="categoryRulesContainer">
                            <!-- 分类规则模板 -->
                            <div class="category-rule">
                                <div class="form-group">
                                    <label>类别名称</label>
                                    <input type="text" class="form-control category-name" value="社交媒体" placeholder="例如：社交媒体">
                                </div>
                                <div class="form-group">
                                    <label>域名列表（每行一个）</label>
                                    <textarea class="form-control category-domains" rows="3" placeholder="例如：facebook.com">facebook.com
twitter.com
instagram.com
linkedin.com</textarea>
                                </div>
                                <button type="button" class="btn btn-danger btn-sm delete-rule">删除</button>
                            </div>
                            
                            <div class="category-rule">
                                <div class="form-group">
                                    <label>类别名称</label>
                                    <input type="text" class="form-control category-name" value="新闻" placeholder="例如：新闻">
                                </div>
                                <div class="form-group">
                                    <label>域名列表（每行一个）</label>
                                    <textarea class="form-control category-domains" rows="3" placeholder="例如：news.google.com">news.google.com
bbc.com
cnn.com
nytimes.com</textarea>
                                </div>
                                <button type="button" class="btn btn-danger btn-sm delete-rule">删除</button>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-secondary" id="addCategoryRule">添加分类规则</button>
                    </section>

                    <!-- URL有效性检查设置 -->
                    <section id="validation" class="settings-section">
                        <h2>URL有效性检查设置</h2>
                        
                        <div class="form-group">
                            <label for="validationFrequency">检查频率</label>
                            <select id="validationFrequency" name="validationFrequency" class="form-control">
                                <option value="manual">手动检查</option>
                                <option value="daily">每天</option>
                                <option value="weekly">每周</option>
                                <option value="monthly">每月</option>
                            </select>
                            <div class="helper-text">设置自动检查书签有效性的频率</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="validationTimeout">检查超时时间（毫秒）</label>
                            <input type="number" id="validationTimeout" name="validationTimeout" min="1000" max="30000" value="5000" class="form-control">
                            <div class="helper-text">检查每个URL的最长等待时间（推荐：3000-10000）</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="validationConcurrency">并发检查数量</label>
                            <input type="number" id="validationConcurrency" name="validationConcurrency" min="1" max="10" value="3" class="form-control">
                            <div class="helper-text">同时检查多少个URL（值越大越快，但可能导致网络拥堵）</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="validationCacheDuration">缓存时间（小时）</label>
                            <input type="number" id="validationCacheDuration" name="validationCacheDuration" min="1" max="720" value="24" class="form-control">
                            <div class="helper-text">检查结果缓存的时间</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="notifyBrokenLinks" name="notifyBrokenLinks" checked>
                                无效链接通知
                            </label>
                            <div class="helper-text">发现无效书签时显示通知</div>
                        </div>
                        
                        <button type="button" class="btn btn-secondary" id="clearValidationCache">清除检查缓存</button>
                    </section>

                    <!-- 界面与主题 -->
                    <section id="appearance" class="settings-section">
                        <h2>界面与主题设置</h2>
                        
                        <div class="form-group">
                            <label for="theme">主题</label>
                            <select id="theme" name="theme" class="form-control">
                                <option value="system">跟随系统</option>
                                <option value="light">浅色模式</option>
                                <option value="dark">深色模式</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="popupWidth">弹出窗口宽度（像素）</label>
                            <input type="number" id="popupWidth" name="popupWidth" min="300" max="800" value="760" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="popupHeight">弹出窗口高度（像素）</label>
                            <input type="number" id="popupHeight" name="popupHeight" min="300" max="600" value="500" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="folderTreeWidth">文件夹树宽度（%）</label>
                            <input type="number" id="folderTreeWidth" name="folderTreeWidth" min="10" max="50" value="30" class="form-control">
                            <div class="helper-text">文件夹树占总宽度的百分比</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="fontSize">字体大小</label>
                            <select id="fontSize" name="fontSize" class="form-control">
                                <option value="small">小</option>
                                <option value="medium" selected>中</option>
                                <option value="large">大</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="showFavicons" name="showFavicons" checked>
                                显示网站图标
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="showVisitCount" name="showVisitCount" checked>
                                显示访问次数
                            </label>
                        </div>
                    </section>

                    <!-- 高级设置 -->
                    <section id="advanced" class="settings-section">
                        <h2>高级设置</h2>
                        
                        <div class="form-group">
                            <label for="storageQuota">存储配额（MB）</label>
                            <div class="form-group-inline">
                                <input type="number" id="storageQuota" name="storageQuota" value="10" disabled class="form-control">
                                <span id="storageUsage" class="storage-usage">已用: 0.2 MB</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="historyRetention">访问历史保留天数</label>
                            <input type="number" id="historyRetention" name="historyRetention" min="7" max="365" value="30" class="form-control">
                            <div class="helper-text">访问记录保留的时间（超过将自动清理）</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="trackIncognito" name="trackIncognito">
                                记录隐身模式访问
                            </label>
                            <div class="helper-text">注意：需要特殊权限</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="debugMode" name="debugMode">
                                调试模式
                            </label>
                            <div class="helper-text">启用调试信息记录</div>
                        </div>
                        
                        <div class="form-group danger-zone">
                            <h3>危险区域</h3>
                            <button type="button" class="btn btn-danger" id="clearAllData">清除所有数据</button>
                            <div class="helper-text">警告：此操作将删除所有设置和访问记录（书签不会删除）</div>
                        </div>
                    </section>

                    <!-- 备份与恢复 -->
                    <section id="backup" class="settings-section">
                        <h2>备份与恢复</h2>
                        
                        <div class="form-group">
                            <label>备份设置</label>
                            <button type="button" class="btn btn-primary" id="exportSettings">导出设置</button>
                            <div class="helper-text">导出所有设置为JSON文件</div>
                        </div>
                        
                        <div class="form-group">
                            <label>恢复设置</label>
                            <div class="file-input-container">
                                <input type="file" id="importSettings" class="file-input" accept=".json">
                                <label for="importSettings" class="btn btn-secondary">选择设置文件</label>
                                <span id="selectedFile">未选择文件</span>
                            </div>
                            <button type="button" class="btn btn-primary" id="restoreSettings" disabled>恢复设置</button>
                            <div class="helper-text">从JSON文件中导入设置</div>
                        </div>
                        
                        <div class="form-group">
                            <label>书签导出</label>
                            <div class="button-group">
                                <button type="button" class="btn btn-secondary" id="exportBookmarksHtml">导出为HTML</button>
                                <button type="button" class="btn btn-secondary" id="exportBookmarksJson">导出为JSON</button>
                            </div>
                            <div class="helper-text">导出所有书签（HTML格式可用于大多数浏览器导入）</div>
                        </div>
                    </section>
                </form>
            </div>
        </main>

        <footer class="settings-footer">
            <div class="footer-actions">
                <button type="button" class="btn btn-secondary" id="resetToDefault">恢复默认设置</button>
                <button type="button" class="btn btn-primary" id="saveSettings">保存设置</button>
            </div>
            <div class="footer-info">
                <p>书签管理与智能收藏提示 v1.0</p>
            </div>
        </footer>
    </div>

    <!-- 通知容器 -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- JavaScript 文件 -->
    <script src="js/options.js" type="text/javascript"></script>
</body>
</html>