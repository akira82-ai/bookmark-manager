<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ»‘å—ä¸æµç¨‹é€»è¾‘å…³è”æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .slider-demo {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .sensitivity-slider {
            position: relative;
            width: 100%;
            height: 40px;
            margin: 20px 0;
        }
        .sensitivity-track {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
        }
        .sensitivity-fill {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            height: 6px;
            background: #667eea;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        .sensitivity-thumb {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .sensitivity-thumb:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }
        .sensitivity-marks {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 10px;
        }
        .sensitivity-mark {
            width: 2px;
            height: 12px;
            background: #ccc;
            border-radius: 1px;
        }
        .sensitivity-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        .mode-info {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        .mode-info-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .mode-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }
        .mode-text {
            font-size: 0.95em;
            color: #333;
        }
        #trigger-conditions {
            margin-top: 15px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.08);
            border-radius: 8px;
            border-left: 4px solid #667eea;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        .test-info {
            margin-top: 30px;
            padding: 20px;
            background: #e8f5e8;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        .test-info h3 {
            margin-top: 0;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸšï¸ æ»‘å—ä¸æµç¨‹é€»è¾‘å…³è”æµ‹è¯•</h1>

        <div class="slider-demo">
            <h3>æ™ºèƒ½æé†’æ•æ„Ÿåº¦è°ƒèŠ‚</h3>
            <div class="sensitivity-slider">
                <div class="sensitivity-track"></div>
                <div class="sensitivity-fill"></div>
                <div class="sensitivity-thumb"></div>
                <div class="sensitivity-marks">
                    <div class="sensitivity-mark"></div>
                    <div class="sensitivity-mark"></div>
                    <div class="sensitivity-mark"></div>
                    <div class="sensitivity-mark"></div>
                    <div class="sensitivity-mark"></div>
                </div>
            </div>
            <div class="sensitivity-labels">
                <span>å¾ˆå°‘</span>
                <span>å¶å°”</span>
                <span>é€‚ä¸­</span>
                <span>å¸¸å¸¸</span>
                <span>é¢‘ç¹</span>
            </div>

            <div class="mode-info">
                <div class="mode-info-row">
                    <span class="mode-icon">ğŸ“Š</span>
                    <span class="mode-text">å½“å‰æ¨¡å¼: <strong id="current-mode-name">é€‚ä¸­æé†’</strong></span>
                </div>
                <div class="mode-info-row">
                    <span class="mode-icon">â°</span>
                    <span class="mode-text">æé†’é¢‘ç‡: <strong id="reminder-frequency">æ¯å‘¨æé†’</strong></span>
                </div>
                <div class="mode-info-row">
                    <span class="mode-icon">ğŸ’¡</span>
                    <span class="mode-text">è¯´æ˜: <span id="mode-description">é€‚åº¦å…³æ³¨ï¼Œæ¯å‘¨ä¸€æ¬¡</span></span>
                </div>
            </div>
        </div>

        <div class="test-info">
            <h3>ğŸ§ª æµ‹è¯•è¯´æ˜</h3>
            <p>è¯·æ‹–åŠ¨ä¸Šæ–¹æ»‘å—ï¼Œè§‚å¯Ÿè§¦å‘æ¡ä»¶å’Œé€‚ç”¨åœºæ™¯çš„å®æ—¶å˜åŒ–ã€‚æ¯ä¸ªæ¡£ä½å¯¹åº”ä¸åŒçš„3å¤§æŒ‡æ ‡åˆ¤å®šæµç¨‹ï¼š</p>
            <ul>
                <li><strong>é¢‘ç¹</strong>ï¼šåªéœ€è®¿é—®æ¬¡æ•°â‰¥3æ¬¡å³å¯è§¦å‘</li>
                <li><strong>å¸¸å¸¸</strong>ï¼šéœ€è¦è®¿é—®æ¬¡æ•°â‰¥5æ¬¡ + æ—¶é•¿â‰¥30ç§’</li>
                <li><strong>é€‚ä¸­</strong>ï¼šéœ€è¦è®¿é—®æ¬¡æ•°â‰¥8æ¬¡ + æ—¶é•¿â‰¥60ç§’ + æ·±åº¦â‰¥1.5å±</li>
                <li><strong>å¶å°”</strong>ï¼šéœ€è¦è®¿é—®æ¬¡æ•°â‰¥12æ¬¡ + æ—¶é•¿â‰¥90ç§’ + æ·±åº¦â‰¥5å±</li>
                <li><strong>å¾ˆå°‘</strong>ï¼šéœ€è¦è®¿é—®æ¬¡æ•°â‰¥20æ¬¡ + æ—¶é•¿â‰¥120ç§’ + æ·±åº¦â‰¥10å±</li>
            </ul>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿ SensitivitySlider ç±»
        class SensitivitySlider {
            constructor() {
                this.track = document.querySelector('.sensitivity-track');
                this.thumb = document.querySelector('.sensitivity-thumb');
                this.fill = document.querySelector('.sensitivity-fill');
                this.isDragging = false;

                // é»˜è®¤é€‚ä¸­æé†’ï¼ˆç¬¬3åˆ»åº¦ï¼‰
                this.currentLevel = 2;

                this.levels = [
                    {
                        name: 'å¾ˆå°‘',
                        frequency: 'æ¯æœˆæé†’',
                        description: 'é‡è¦èµ„æ–™ï¼Œæ¯æœˆæé†’ä¸€æ¬¡',
                        color: '#4CAF50',
                        interval: 30,
                        triggerConditions: {
                            visitCount: 'â‰¥ 20æ¬¡',
                            browseDuration: 'â‰¥ 120ç§’',
                            browseDepth: 'â‰¥ 10å±',
                            process: '(5æ¡£,4æ¡£,3æ¡£)'
                        },
                        scenarios: ['æåº¦é‡è¦çš„èµ„æ–™', 'éœ€è¦æ·±åº¦å…³æ³¨çš„å†…å®¹', 'æ¯æœˆå›é¡¾ä¸€æ¬¡']
                    },
                    {
                        name: 'å¶å°”',
                        frequency: 'æ¯ä¸¤å‘¨æé†’',
                        description: 'å®šæœŸæŸ¥çœ‹ï¼Œæ¯ä¸¤å‘¨ä¸€æ¬¡',
                        color: '#8BC34A',
                        interval: 14,
                        triggerConditions: {
                            visitCount: 'â‰¥ 12æ¬¡',
                            browseDuration: 'â‰¥ 90ç§’',
                            browseDepth: 'â‰¥ 5å±',
                            process: '(4æ¡£,3æ¡£,2æ¡£)'
                        },
                        scenarios: ['é‡è¦èµ„æ–™', 'å®šæœŸå›é¡¾çš„å†…å®¹', 'æ¯ä¸¤å‘¨æ£€æŸ¥ä¸€æ¬¡']
                    },
                    {
                        name: 'é€‚ä¸­',
                        frequency: 'æ¯å‘¨æé†’',
                        description: 'é€‚åº¦å…³æ³¨ï¼Œæ¯å‘¨ä¸€æ¬¡',
                        color: '#CDDC39',
                        interval: 7,
                        triggerConditions: {
                            visitCount: 'â‰¥ 8æ¬¡',
                            browseDuration: 'â‰¥ 60ç§’',
                            browseDepth: 'â‰¥ 1.5å±',
                            process: '(3æ¡£,2æ¡£,1æ¡£)'
                        },
                        scenarios: ['å·¥ä½œå­¦ä¹ èµ„æ–™', 'å¸¸ç”¨å‚è€ƒå†…å®¹', 'æ¯å‘¨å›é¡¾ä¸€æ¬¡']
                    },
                    {
                        name: 'å¸¸å¸¸',
                        frequency: 'æ¯ä¸‰å¤©æé†’',
                        description: 'ç»å¸¸å…³æ³¨ï¼Œæ¯ä¸‰å¤©ä¸€æ¬¡',
                        color: '#FFC107',
                        interval: 3,
                        triggerConditions: {
                            visitCount: 'â‰¥ 5æ¬¡',
                            browseDuration: 'â‰¥ 30ç§’',
                            browseDepth: 'æ— è¦æ±‚',
                            process: '(2æ¡£,1æ¡£,?)'
                        },
                        scenarios: ['éœ€è¦å…³æ³¨çš„å†…å®¹', 'é¡¹ç›®ç›¸å…³èµ„æ–™', 'æ¯ä¸‰å¤©æ£€æŸ¥ä¸€æ¬¡']
                    },
                    {
                        name: 'é¢‘ç¹',
                        frequency: 'æ¯å¤©æé†’',
                        description: 'æŒç»­å…³æ³¨ï¼Œæ¯å¤©ä¸€æ¬¡',
                        color: '#FF5722',
                        interval: 1,
                        triggerConditions: {
                            visitCount: 'â‰¥ 3æ¬¡',
                            browseDuration: 'æ— è¦æ±‚',
                            browseDepth: 'æ— è¦æ±‚',
                            process: '(1æ¡£,?,?)'
                        },
                        scenarios: ['ä¸´æ—¶èµ„æ–™å’Œå¾…åŠäº‹é¡¹', 'éœ€è¦æ¯å¤©å…³æ³¨çš„å†…å®¹', 'çŸ­æœŸé¡¹ç›®èµ„æ–™']
                    }
                ];

                this.init();
            }

            init() {
                this.updateUI();
                this.attachEvents();
            }

            attachEvents() {
                this.thumb.addEventListener('mousedown', this.handleMouseDown.bind(this));
                this.track.addEventListener('click', this.handleTrackClick.bind(this));
                document.addEventListener('mousemove', this.handleMouseMove.bind(this));
                document.addEventListener('mouseup', this.handleMouseUp.bind(this));
            }

            handleMouseDown(e) {
                e.preventDefault();
                this.isDragging = true;
                this.thumb.style.cursor = 'grabbing';
            }

            handleMouseMove(e) {
                if (!this.isDragging) return;
                this.updatePosition(e.clientX);
            }

            handleMouseUp() {
                this.isDragging = false;
                this.thumb.style.cursor = 'grab';
            }

            handleTrackClick(e) {
                if (e.target === this.thumb) return;
                this.updatePosition(e.clientX);
            }

            updatePosition(clientX) {
                const rect = this.track.getBoundingClientRect();
                const x = clientX - rect.left;
                const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));

                // è®¡ç®—æœ€è¿‘çš„æ¡£ä½ (0-4)ï¼ŒåŸºäº5ä¸ªåˆ»åº¦ç‚¹
                const level = Math.round(percentage / 25); // 100% / 4ä¸ªé—´éš” = 25%
                this.setLevel(Math.max(0, Math.min(4, level)));
            }

            setLevel(level) {
                this.currentLevel = level;
                this.updateUI();
            }

            updateUI() {
                // æ›´æ–°æ»‘å—ä½ç½®
                const percentage = (this.currentLevel / 4) * 100;
                this.thumb.style.left = `${percentage}%`;
                this.fill.style.width = `${percentage}%`;

                // æ›´æ–°æ¨¡å¼ä¿¡æ¯
                const levelData = this.levels[this.currentLevel];
                if (!levelData) {
                    console.error('Invalid level:', this.currentLevel);
                    return;
                }

                document.getElementById('current-mode-name').textContent = `${levelData.name}æé†’`;
                document.getElementById('reminder-frequency').textContent = levelData.frequency;
                document.getElementById('mode-description').textContent = levelData.description;

                // æ›´æ–°é¢œè‰²ä¸»é¢˜
                if (levelData.color) {
                    this.thumb.style.backgroundColor = levelData.color;
                    this.fill.style.backgroundColor = levelData.color;
                }

                // æ›´æ–°è§¦å‘æ¡ä»¶æ˜¾ç¤º
                this.updateTriggerConditions(levelData);
            }

            updateTriggerConditions(levelData) {
                // æŸ¥æ‰¾æˆ–åˆ›å»ºè§¦å‘æ¡ä»¶æ˜¾ç¤ºåŒºåŸŸ
                let conditionsDiv = document.getElementById('trigger-conditions');
                if (!conditionsDiv) {
                    conditionsDiv = document.createElement('div');
                    conditionsDiv.id = 'trigger-conditions';

                    // æ’å…¥åˆ°mode-descriptionåé¢
                    const descriptionEl = document.getElementById('mode-description');
                    if (descriptionEl) {
                        descriptionEl.parentNode.insertBefore(conditionsDiv, descriptionEl.nextSibling);
                    }
                }

                // æ›´æ–°è§¦å‘æ¡ä»¶å†…å®¹
                conditionsDiv.innerHTML = `
                    <div style="margin-bottom: 10px;">
                        <strong style="color: #667eea;">ğŸ“‹ è§¦å‘æ¡ä»¶ï¼š</strong>
                    </div>
                    <div style="margin-left: 20px; margin-bottom: 8px;">
                        <span style="color: #666;">â€¢ è®¿é—®æ¬¡æ•°ï¼š</span>
                        <span style="color: #333; font-weight: 600;">${levelData.triggerConditions.visitCount}</span>
                    </div>
                    <div style="margin-left: 20px; margin-bottom: 8px;">
                        <span style="color: #666;">â€¢ è®¿é—®æ—¶é•¿ï¼š</span>
                        <span style="color: #333; font-weight: 600;">${levelData.triggerConditions.browseDuration}</span>
                    </div>
                    <div style="margin-left: 20px; margin-bottom: 12px;">
                        <span style="color: #666;">â€¢ è®¿é—®æ·±åº¦ï¼š</span>
                        <span style="color: #333; font-weight: 600;">${levelData.triggerConditions.browseDepth}</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong style="color: #667eea;">ğŸ¯ é€‚ç”¨åœºæ™¯ï¼š</strong>
                    </div>
                    <div style="margin-left: 20px;">
                        ${levelData.scenarios.map(scenario =>
                            `<div style="margin-bottom: 4px; color: #666;">â€¢ ${scenario}</div>`
                        ).join('')}
                    </div>
                    <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid rgba(102, 126, 234, 0.2);">
                        <span style="color: #999; font-size: 0.85em;">æµç¨‹é¡ºåºï¼š${levelData.triggerConditions.process}</span>
                    </div>
                `;
            }
        }

        // åˆå§‹åŒ–æ»‘å—
        const slider = new SensitivitySlider();
    </script>
</body>
</html>